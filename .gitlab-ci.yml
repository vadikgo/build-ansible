stages:
#  - lint
  - build
.lint-centos6:
  stage: lint
  script:
    - ansible-lint -x "ANSIBLE0006" rebuild-centos6-ansible.yml
.lint-centos7:
  stage: lint
  script:
    - ansible-lint -x "ANSIBLE0006" build-centos7-ansible.yml
ansible-centos6:
  image: centos:6
  stage: build
  script:
    - curl -s https://gitlab.com/vladgo/omnibus-ansible/raw/master/ansible_install.sh | sh
    - ansible-playbook build-centos6-ansible.yml -e "result_dir=$CI_PROJECT_DIR"
  artifacts:
    paths:
    - '*.rpm'
ansible-centos7:
  image: centos:7
  stage: build
  script:
    - curl -s https://gitlab.com/vladgo/omnibus-ansible/raw/master/ansible_install.sh | sh
    - ansible-playbook build-centos7-ansible.yml -e "result_dir=$CI_PROJECT_DIR"
  artifacts:
    paths:
    - '*.rpm'
